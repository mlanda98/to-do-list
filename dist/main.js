(()=>{"use strict";function t(){this.projects=[]=JSON.parse(localStorage.getItem("projects"))||[],this.nextProjectId=1}t.prototype.saveProjectsToLocalStorage=function(){try{localStorage.setItem("projects",JSON.stringify(this.projects))}catch(t){console.error("error saving projects to local storage:",t)}},t.prototype.loadProjectsFromLocalStorage=function(){try{const t=JSON.parse(localStorage.getItem("projects"));t&&(this.projects=t,this.renderProjects())}catch(t){console.error("error loading projects from local storage:",t)}},t.prototype.addProject=function(t){const e="project-"+this.nextProjectId++;this.projects.push({id:e,name:t}),this.saveProjectsToLocalStorage(),this.renderProjects()},t.prototype.renderProjects=function(){const t=document.getElementById("projects");t.innerHTML="",this.projects.forEach((e=>{const n=document.createElement("div");n.classList.add("project-item");const o=document.createElement("button");o.classList.add("project-button"),o.id=e.id,o.textContent=e.name;const d=document.createElement("button");d.classList.add("delete-project-button"),d.textContent="Delete",d.dataset.projectId=e.id,n.appendChild(o),n.appendChild(d),t.appendChild(n)}))};const e=t;function n(){try{localStorage.setItem("tasks",JSON.stringify(s.tasks))}catch(t){console.error("error saving tasks to localStorage:",t)}}function o(){const t=JSON.parse(localStorage.getItem("tasks"));t&&(s.tasks=t),n()}function d(){this.tasks=JSON.parse(localStorage.getItem("tasks"))||[]}d.prototype.addTask=function(t,e,o,d,s){const c={id:this.generatedId(),title:t,description:e,dueDate:o,priority:d,project:s};this.tasks.push(c),this.renderTasks(s),n()},d.prototype.deleteTask=function(t){this.tasks=this.tasks.filter((e=>e.id!==t)),this.renderTasks(),n()},d.prototype.renderTasks=function(t){const e=document.getElementById("tasks");e.innerHTML="",this.tasks.forEach((n=>{if(n.project===t){const t=document.createElement("div");t.classList.add("task-item");let o="";o="Low"===n.priority?"priority-low":"Medium"===n.priority?"priority-medium":"priority-high",t.classList.add(o),t.innerHTML=`\n      <h3>${n.title}</h3>\n      <p>Description: ${n.description}</p>\n      <p>Due Date: ${n.dueDate}</p>\n      <p>Priority: ${n.priority}</p>\n      <p>Project: ${n.project}</p>\n      <button class="edit-button" data-task-id="${n.id}">Edit</button>\n      <button class="delete-button" data-task-id="${n.id}">Delete</button>`,e.appendChild(t)}}))},d.prototype.generatedId=function(){return`${(new Date).getTime()} - ${Math.floor(1e4*Math.random())}`};const s=new d,c=s;let i;function a(){document.getElementById("editTaskModal").style.display="none"}!function(){const t=document.getElementById("task-form");function e(t){t.preventDefault();const e=document.getElementById("title-input").value,o=document.getElementById("description-input").value,d=document.getElementById("due-date-input").value,s=document.getElementById("priority-input").value,i=document.getElementById("selected-project").value;c.addTask(e,o,d,s,i),n(),document.getElementById("title-input").value="",document.getElementById("description-input").value="",document.getElementById("due-date-input").value="",document.getElementById("priority-input").value="",document.getElementById("selected-project").value=""}document.addEventListener("DOMContentLoaded",(function(){t.addEventListener("submit",e),o()})),document.getElementById("tasks").addEventListener("click",(function(t){const e=t.target;if(e.classList.contains("delete-button")){const t=e.getAttribute("data-task-id"),n=new CustomEvent("taskSelected",{detail:t});document.dispatchEvent(n)}}))}(),c.addTask("Task 1","Description of task 1","2024-04-15","High","Project A"),document.getElementById("task-form").dispatchEvent(new Event("submit")),document.addEventListener("taskSelected",(function(t){const e=t.detail;c.deleteTask(e),n()})),document.addEventListener("DOMContentLoaded",(function(){const t=new e;if(t.loadProjectsFromLocalStorage(),0===t.projects.length){const e="Project A";t.addProject(e),c.renderTasks(e)}function o(t){c.renderTasks(t)}t.projects.forEach((t=>{o(t.name)})),document.addEventListener("click",(function(e){if(e.target.classList.contains("project-button")){const n=e.target.id,o=t.projects.find((t=>t.id===n));c.renderTasks(o.name)}})),document.getElementById("projects-form").addEventListener("submit",(function(e){e.preventDefault();const n=document.getElementById("project-name-input"),d=n.value.trim();t.addProject(d),o(d),n.value=""}));const d="Project A";t.addProject(d),o(d),n(),document.addEventListener("click",(function(e){if(e.target.classList.contains("delete-project-button")){const o=e.target.dataset.projectId,d=t.projects.findIndex((t=>t.id===o));-1!==d&&(c.tasks=c.tasks.filter((e=>e.project!==t.projects[d].name)),t.projects.splice(d,1),t.saveProjectsToLocalStorage(),n(),t.renderProjects(),c.renderTasks("Project A"))}}))})),document.addEventListener("DOMContentLoaded",(function(){const t=document.getElementById("editTaskModal"),e=document.getElementById("cancel-task-button");document.querySelector(".close").addEventListener("click",(function(){t.style.display="none"})),document.getElementById("tasks").addEventListener("click",(function(e){if(e.target.classList.contains("edit-button")){const o=e.target.dataset.taskId;n=c.tasks.find((t=>t.id===o)),document.getElementById("edit-title-input").value=n.title,document.getElementById("edit-description-input").value=n.description,document.getElementById("edit-due-date-input").value=n.dueDate,document.getElementById("edit-priority-input").value=n.priority,document.getElementById("edit-selected-project").value=n.project,t.style.display="block",i=o}var n})),e.addEventListener("click",a),window.addEventListener("click",(function(e){e.target===t&&a()}))})),document.getElementById("save-task-button").addEventListener("click",(function(){document.getElementById("editTaskModal").style.display="none";const t=document.getElementById("edit-title-input").value,e=document.getElementById("edit-description-input").value,d=document.getElementById("edit-due-date-input").value,s=document.getElementById("edit-priority-input").value,a=document.getElementById("edit-selected-project").value,r=c.tasks.findIndex((t=>t.id===i));-1!==r&&(c.tasks[r].title=t,c.tasks[r].description=e,c.tasks[r].dueDate=d,c.tasks[r].priority=s,c.tasks[r].project=a),n(),o(),c.renderTasks(a)})),document.addEventListener("projectAdded",(function(t){const n=t.detail;(new e).addProject(n),saveProjectsToLocalStorage(),c.renderTasks(n)}))})();